(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5075)}])},2501:function(e,n,r){"use strict";r.d(n,{a:function(){return l}});var t=r(4051),o=r.n(t),i=r(7294);function u(e,n,r,t,o,i,u){try{var s=e[i](u),c=s.value}catch(a){return void r(a)}s.done?n(c):Promise.resolve(c).then(t,o)}function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){s(e,n,r[n])}))}return e}var a="__store_RiotAuthBundle",l=function(){var e=(0,i.useState)(null),n=e[0],r=e[1],t=(0,i.useState)(null),s=t[0],l=t[1],h=(0,i.useState)(!0),d=h[0],f=h[1],p=function(){var e,n=(e=o().mark((function e(n,t,i){var u,s,h,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,fetch("/ValoStore_web/api/getAuthTokens",{body:JSON.stringify({username:n,password:t,region:i}),method:"POST",headers:{"Content-Type":"application/json"}});case 3:if(200==(u=e.sent).status){e.next=11;break}return e.t0=l,e.next=8,u.text();case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 11:return e.next=13,u.json();case 13:s=e.sent,h=new Date,d=new Date(h.getTime()+33e5),p=c({},s,{expires:d}),r(p),localStorage.setItem(a,JSON.stringify(p)),f(!1);case 20:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){u(i,t,o,s,c,"next",e)}function c(e){u(i,t,o,s,c,"throw",e)}s(void 0)}))});return function(e,r,t){return n.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=localStorage.getItem(a);if(e){var n=JSON.parse(e),t=new Date(n.expires);console.log(t),null!==n&&t>new Date&&(n.expires=t,r(n))}f(!1)}),[]),{loading:d,authBundle:n,createAuthBundle:p,clearAuthBundle:function(){f(!0),r(null),null!==localStorage.getItem(a)&&localStorage.removeItem(a),f(!1)},error:s}}},5075:function(e,n,r){"use strict";r.r(n);var t=r(4051),o=r.n(t),i=r(5893),u=r(7536),s=r(2501),c=r(7294),a=r(1163),l=r(8917),h=r(3492),d=r(9952),f=r(4348),p=r(2308),v=r(887);function x(e,n,r,t,o,i,u){try{var s=e[i](u),c=s.value}catch(a){return void r(a)}s.done?n(c):Promise.resolve(c).then(t,o)}function j(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function w(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){j(e,n,r[n])}))}return e}n.default=function(){var e=(0,u.cI)(),n=e.register,r=e.handleSubmit,t=e.formState.errors,j=(0,s.a)(),m=j.createAuthBundle,g=j.clearAuthBundle,y=(j.error,j.loading),b=j.authBundle,O=(0,a.useRouter)(),S=function(){var e,n=(e=o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(n.username,n.password,n.region);case 2:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function u(e){x(i,t,o,u,s,"next",e)}function s(e){x(i,t,o,u,s,"throw",e)}u(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){!y&&b&&O.push("/store")}),[y]),(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(h.Z,{h1:!0,children:"Login"}),(0,i.jsx)(d.Z,{h:1}),(0,i.jsx)("div",{style:{maxWidth:"16rem"},children:(0,i.jsxs)("form",{onSubmit:r(S),children:[(0,i.jsx)(f.Z,w({placeholder:"Username"},n("username",{required:!0}),{width:"100%",children:t.username&&(0,i.jsx)(p.Z,{type:"error",children:(0,i.jsx)(h.Z,{small:!0,children:"This field is required"})})})),(0,i.jsx)(d.Z,{h:1}),(0,i.jsx)(f.Z.Password,w({width:"100%",placeholder:"Password"},n("password",{required:!0}),{children:t.password&&(0,i.jsx)(p.Z,{type:"error",children:(0,i.jsx)(h.Z,{small:!0,children:"This field is required"})})})),(0,i.jsx)(d.Z,{h:1}),(0,i.jsx)(h.Z,{children:"Select your region."}),(0,i.jsxs)("select",w({},n("region"),{required:!0,children:[(0,i.jsx)("option",{value:"KR",children:"KR"}),(0,i.jsx)("option",{value:"EU",children:"EU"}),(0,i.jsx)("option",{value:"AP",children:"AP"}),(0,i.jsx)("option",{value:"NA",children:"NA"}),(0,i.jsx)("option",{value:"BR",children:"BR"}),(0,i.jsx)("option",{value:"LATAM",children:"LATAM"})]})),(0,i.jsx)(d.Z,{h:1}),(0,i.jsx)(v.Z,{loading:y,htmlType:"submit",width:"100%",children:"Log In"}),(0,i.jsx)(d.Z,{h:1}),(0,i.jsx)(v.Z,{onClick:function(){return g()},ghost:!0,width:"100%",children:"Log Out"})]})}),(0,i.jsx)(l.Z.Footer,{children:(0,i.jsx)(h.Z,{type:"secondary",children:"scottjsh \xa9 2024"})})]})}}},function(e){e.O(0,[683,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);