(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{779:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store",function(){return n(5230)}])},2501:function(e,t,n){"use strict";n.d(t,{a:function(){return d}});var r=n(4051),a=n.n(r),o=n(7294),i=n(5725);function s(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}var l="__store_RiotAuthBundle",d=function(){var e=(0,o.useState)(null),t=e[0],n=e[1],r=(0,o.useState)(null),u=r[0],d=r[1],f=(0,o.useState)(!0),h=f[0],p=f[1],g=function(){var e,t=(e=a().mark((function e(t,r,o){var s,u,f,h,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,fetch(i.basePath+"/api/getAuthTokens",{body:JSON.stringify({username:t,password:r,region:o}),method:"POST",headers:{"Content-Type":"application/json"}});case 3:if(200==(s=e.sent).status){e.next=11;break}return e.t0=d,e.next=8,s.text();case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 11:return e.next=13,s.json();case 13:u=e.sent,f=new Date,h=new Date(f.getTime()+33e5),g=c({},u,{expires:h}),n(g),localStorage.setItem(l,JSON.stringify(g)),p(!1);case 20:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,u,"next",e)}function u(e){s(o,r,a,i,u,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=localStorage.getItem(l);if(e){var t=JSON.parse(e),r=new Date(t.expires);console.log(r),null!==t&&r>new Date&&(t.expires=r,n(t))}p(!1)}),[]),{loading:h,authBundle:t,createAuthBundle:g,clearAuthBundle:function(){p(!0),n(null),null!==localStorage.getItem(l)&&localStorage.removeItem(l),p(!1)},error:u}}},5725:function(e){"use strict";e.exports={basePath:"/ValoStore_web",reactStrictMode:!0,images:{domains:["media.valorant-api.com"]}}},5230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),a=n(8917),o=n(3492),i=n(1761),s=n(493),u=n(292),c=n(887),l=n(2501),d=n(4051),f=n.n(d),h=n(7294),p=n(5725);function g(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}var m=function(e){var t=(0,h.useState)(null),n=t[0],r=t[1],a=(0,h.useState)(null),o=a[0],i=a[1],s=(0,h.useState)(!0),u=s[0],c=s[1];return(0,h.useEffect)((function(){if(null!==e)if(e.expires<new Date)i("Your access token has expired, please reload.");else{var t=function(){var t,n=(t=f().mark((function t(){var n,a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(p.basePath+"/api/getUserStore",{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,r(a),c(!1);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){g(o,r,a,i,s,"next",e)}function s(e){g(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();t()}}),[e]),{store:n,error:o,loading:u}},x=n(1163),v=n(8130),j=function(){var e,t=(0,x.useRouter)(),n=(0,l.a)(),d=n.loading,f=n.authBundle,p=n.clearAuthBundle,g=m(f),j=g.loading,y=g.store,w=g.error;(0,h.useEffect)((function(){d||f||t.push("/")}),[d]);return(0,r.jsxs)(a.Z,{children:[j?(0,r.jsx)("span",{children:"loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{h1:!0,children:"Your Store"}),(0,r.jsxs)(o.Z,{children:["Time remaining:"," ",(0,r.jsx)(v.ZP,{date:Date.now()+1e3*y.storefrontReset})]}),(0,r.jsx)(i.Z.Container,{gap:2,justify:"center",children:y.offers.map((function(e){return(0,r.jsx)(i.Z,{xs:24,md:12,lg:6,children:(0,r.jsx)(s.Z,{shadow:!0,caption:e.displayName,children:(0,r.jsx)(u.Z,{src:e.displayIcon,padding:"1rem",height:"14rem"})})},e.displayName)}))}),y.nightMarket&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{h1:!0,children:"Your Night Market"}),(0,r.jsxs)(o.Z,{children:["Night Market time remaining:"," ",(0,r.jsx)(v.ZP,{date:Date.now()+1e3*y.nightMarket.nightMarketReset})]})]}),(0,r.jsx)(i.Z.Container,{gap:2,justify:"center",children:null===(e=y.nightMarket)||void 0===e?void 0:e.offers.map((function(e){return(0,r.jsx)(i.Z,{xs:24,md:12,lg:6,children:(0,r.jsx)(s.Z,{shadow:!0,caption:e.storeItem.displayName+" | Price: "+e.discountPrice.toString()+" VP",children:(0,r.jsx)(u.Z,{src:e.storeItem.displayIcon,padding:"1rem",height:"14rem"})})},e.storeItem.displayName)}))}),w&&(0,r.jsxs)("span",{children:["Error fetching store: ",w]}),(0,r.jsx)(c.Z,{onClick:function(){return p(),void t.push("/")},ghost:!0,children:"Log Out"})]}),(0,r.jsx)(a.Z.Footer,{children:(0,r.jsx)(o.Z,{type:"secondary",children:"scottjsh \xa9 2024"})})]})}}},function(e){e.O(0,[110,774,888,179],(function(){return t=779,e(e.s=t);var t}));var t=e.O();_N_E=t}]);