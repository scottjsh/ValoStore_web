(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{779:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store",function(){return n(5230)}])},2501:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(4051),o=n.n(r),i=n(7294);function a(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}var c="__store_RiotAuthBundle",l=function(){var e=(0,i.useState)(null),t=e[0],n=e[1],r=(0,i.useState)(null),s=r[0],l=r[1],f=(0,i.useState)(!0),d=f[0],h=f[1],p=function(){var e,t=(e=o().mark((function e(t,r,i){var a,s,f,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,fetch("/api/getAuthTokens",{body:JSON.stringify({username:t,password:r,region:i}),method:"POST",headers:{"Content-Type":"application/json"}});case 3:if(200==(a=e.sent).status){e.next=11;break}return e.t0=l,e.next=8,a.text();case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return");case 11:return e.next=13,a.json();case 13:s=e.sent,f=new Date,d=new Date(f.getTime()+33e5),p=u({},s,{expires:d}),n(p),localStorage.setItem(c,JSON.stringify(p)),h(!1);case 20:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,u,"next",e)}function u(e){a(i,r,o,s,u,"throw",e)}s(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=localStorage.getItem(c);if(e){var t=JSON.parse(e),r=new Date(t.expires);console.log(r),null!==t&&r>new Date&&(t.expires=r,n(t))}h(!1)}),[]),{loading:d,authBundle:t,createAuthBundle:p,clearAuthBundle:function(){h(!0),n(null),null!==localStorage.getItem(c)&&localStorage.removeItem(c),h(!1)},error:s}}},5230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(5893),o=n(8917),i=n(3492),a=n(1761),s=n(493),u=n(292),c=n(887),l=n(2501),f=n(4051),d=n.n(f),h=n(7294);function p(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,o)}var g=function(e){var t=(0,h.useState)(null),n=t[0],r=t[1],o=(0,h.useState)(null),i=o[0],a=o[1],s=(0,h.useState)(!0),u=s[0],c=s[1];return(0,h.useEffect)((function(){if(null!==e)if(e.expires<new Date)a("Your access token has expired, please reload.");else{var t=function(){var t,n=(t=d().mark((function t(){var n,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/getUserStore",{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:o=t.sent,r(o),c(!1);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(e){p(i,r,o,a,s,"next",e)}function s(e){p(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();t()}}),[e]),{store:n,error:i,loading:u}},m=n(1163),x=n(8130),v=function(){var e,t=(0,m.useRouter)(),n=(0,l.a)(),f=n.loading,d=n.authBundle,p=n.clearAuthBundle,v=g(d),j=v.loading,y=v.store,w=v.error;(0,h.useEffect)((function(){f||d||t.push("/")}),[f]);return(0,r.jsxs)(o.Z,{children:[j?(0,r.jsx)("span",{children:"loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{h1:!0,children:"Your Store"}),(0,r.jsxs)(i.Z,{children:["Time remaining:"," ",(0,r.jsx)(x.ZP,{date:Date.now()+1e3*y.storefrontReset})]}),(0,r.jsx)(a.Z.Container,{gap:2,justify:"center",children:y.offers.map((function(e){return(0,r.jsx)(a.Z,{xs:24,md:12,lg:6,children:(0,r.jsx)(s.Z,{shadow:!0,caption:e.displayName,children:(0,r.jsx)(u.Z,{src:e.displayIcon,padding:"1rem",height:"14rem"})})},e.displayName)}))}),y.nightMarket&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{h1:!0,children:"Your Night Market"}),(0,r.jsxs)(i.Z,{children:["Night Market time remaining:"," ",(0,r.jsx)(x.ZP,{date:Date.now()+1e3*y.nightMarket.nightMarketReset})]})]}),(0,r.jsx)(a.Z.Container,{gap:2,justify:"center",children:null===(e=y.nightMarket)||void 0===e?void 0:e.offers.map((function(e){return(0,r.jsx)(a.Z,{xs:24,md:12,lg:6,children:(0,r.jsx)(s.Z,{shadow:!0,caption:e.storeItem.displayName+" | Price: "+e.discountPrice.toString()+" VP",children:(0,r.jsx)(u.Z,{src:e.storeItem.displayIcon,padding:"1rem",height:"14rem"})})},e.storeItem.displayName)}))}),w&&(0,r.jsxs)("span",{children:["Error fetching store: ",w]}),(0,r.jsx)(c.Z,{onClick:function(){return p(),void t.push("/")},ghost:!0,children:"Log Out"})]}),(0,r.jsx)(o.Z.Footer,{children:(0,r.jsx)(i.Z,{type:"secondary",children:"scottjsh \xa9 2024"})})]})}}},function(e){e.O(0,[110,774,888,179],(function(){return t=779,e(e.s=t);var t}));var t=e.O();_N_E=t}]);